'use strict';

module.exports = function (Chart) {

	var helpers = Chart.helpers,
	    noop = helpers.noop;

	Chart.LinearScaleBase = Chart.Scale.extend({
		handleTickRangeOptions: function handleTickRangeOptions() {
			var me = this;
			var opts = me.options;
			var tickOpts = opts.ticks;

			// If we are forcing it to begin at 0, but 0 will already be rendered on the chart,
			// do nothing since that would make the chart weird. If the user really wants a weird chart
			// axis, they can manually override it
			if (tickOpts.beginAtZero) {
				var minSign = helpers.sign(me.min);
				var maxSign = helpers.sign(me.max);

				if (minSign < 0 && maxSign < 0) {
					// move the top up to 0
					me.max = 0;
				} else if (minSign > 0 && maxSign > 0) {
					// move the bottom down to 0
					me.min = 0;
				}
			}

			if (tickOpts.min !== undefined) {
				me.min = tickOpts.min;
			} else if (tickOpts.suggestedMin !== undefined) {
				me.min = Math.min(me.min, tickOpts.suggestedMin);
			}

			if (tickOpts.max !== undefined) {
				me.max = tickOpts.max;
			} else if (tickOpts.suggestedMax !== undefined) {
				me.max = Math.max(me.max, tickOpts.suggestedMax);
			}

			if (me.min === me.max) {
				me.max++;

				if (!tickOpts.beginAtZero) {
					me.min--;
				}
			}
		},
		getTickLimit: noop,
		handleDirectionalChanges: noop,

		buildTicks: function buildTicks() {
			var me = this;
			var opts = me.options;
			var tickOpts = opts.ticks;

			// Figure out what the max number of ticks we can support it is based on the size of
			// the axis area. For now, we say that the minimum tick spacing in pixels must be 50
			// We also limit the maximum number of ticks to 11 which gives a nice 10 squares on
			// the graph. Make sure we always have at least 2 ticks
			var maxTicks = me.getTickLimit();
			maxTicks = Math.max(2, maxTicks);

			var numericGeneratorOptions = {
				maxTicks: maxTicks,
				min: tickOpts.min,
				max: tickOpts.max,
				stepSize: helpers.getValueOrDefault(tickOpts.fixedStepSize, tickOpts.stepSize)
			};
			var ticks = me.ticks = Chart.Ticks.generators.linear(numericGeneratorOptions, me);

			me.handleDirectionalChanges();

			// At this point, we need to update our max and min given the tick values since we have expanded the
			// range of the scale
			me.max = helpers.max(ticks);
			me.min = helpers.min(ticks);

			if (tickOpts.reverse) {
				ticks.reverse();

				me.start = me.max;
				me.end = me.min;
			} else {
				me.start = me.min;
				me.end = me.max;
			}
		},
		convertTicksToLabels: function convertTicksToLabels() {
			var me = this;
			me.ticksAsNumbers = me.ticks.slice();
			me.zeroLineIndex = me.ticks.indexOf(0);

			Chart.Scale.prototype.convertTicksToLabels.call(me);
		}
	});
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjYWxlLmxpbmVhcmJhc2UuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIkNoYXJ0IiwiaGVscGVycyIsIm5vb3AiLCJMaW5lYXJTY2FsZUJhc2UiLCJTY2FsZSIsImV4dGVuZCIsImhhbmRsZVRpY2tSYW5nZU9wdGlvbnMiLCJtZSIsIm9wdHMiLCJvcHRpb25zIiwidGlja09wdHMiLCJ0aWNrcyIsImJlZ2luQXRaZXJvIiwibWluU2lnbiIsInNpZ24iLCJtaW4iLCJtYXhTaWduIiwibWF4IiwidW5kZWZpbmVkIiwic3VnZ2VzdGVkTWluIiwiTWF0aCIsInN1Z2dlc3RlZE1heCIsImdldFRpY2tMaW1pdCIsImhhbmRsZURpcmVjdGlvbmFsQ2hhbmdlcyIsImJ1aWxkVGlja3MiLCJtYXhUaWNrcyIsIm51bWVyaWNHZW5lcmF0b3JPcHRpb25zIiwic3RlcFNpemUiLCJnZXRWYWx1ZU9yRGVmYXVsdCIsImZpeGVkU3RlcFNpemUiLCJUaWNrcyIsImdlbmVyYXRvcnMiLCJsaW5lYXIiLCJyZXZlcnNlIiwic3RhcnQiLCJlbmQiLCJjb252ZXJ0VGlja3NUb0xhYmVscyIsInRpY2tzQXNOdW1iZXJzIiwic2xpY2UiLCJ6ZXJvTGluZUluZGV4IiwiaW5kZXhPZiIsInByb3RvdHlwZSIsImNhbGwiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxPQUFPQyxPQUFQLEdBQWlCLFVBQVNDLEtBQVQsRUFBZ0I7O0FBRWhDLEtBQUlDLFVBQVVELE1BQU1DLE9BQXBCO0FBQUEsS0FDQ0MsT0FBT0QsUUFBUUMsSUFEaEI7O0FBR0FGLE9BQU1HLGVBQU4sR0FBd0JILE1BQU1JLEtBQU4sQ0FBWUMsTUFBWixDQUFtQjtBQUMxQ0MsMEJBQXdCLGtDQUFXO0FBQ2xDLE9BQUlDLEtBQUssSUFBVDtBQUNBLE9BQUlDLE9BQU9ELEdBQUdFLE9BQWQ7QUFDQSxPQUFJQyxXQUFXRixLQUFLRyxLQUFwQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFJRCxTQUFTRSxXQUFiLEVBQTBCO0FBQ3pCLFFBQUlDLFVBQVVaLFFBQVFhLElBQVIsQ0FBYVAsR0FBR1EsR0FBaEIsQ0FBZDtBQUNBLFFBQUlDLFVBQVVmLFFBQVFhLElBQVIsQ0FBYVAsR0FBR1UsR0FBaEIsQ0FBZDs7QUFFQSxRQUFJSixVQUFVLENBQVYsSUFBZUcsVUFBVSxDQUE3QixFQUFnQztBQUMvQjtBQUNBVCxRQUFHVSxHQUFILEdBQVMsQ0FBVDtBQUNBLEtBSEQsTUFHTyxJQUFJSixVQUFVLENBQVYsSUFBZUcsVUFBVSxDQUE3QixFQUFnQztBQUN0QztBQUNBVCxRQUFHUSxHQUFILEdBQVMsQ0FBVDtBQUNBO0FBQ0Q7O0FBRUQsT0FBSUwsU0FBU0ssR0FBVCxLQUFpQkcsU0FBckIsRUFBZ0M7QUFDL0JYLE9BQUdRLEdBQUgsR0FBU0wsU0FBU0ssR0FBbEI7QUFDQSxJQUZELE1BRU8sSUFBSUwsU0FBU1MsWUFBVCxLQUEwQkQsU0FBOUIsRUFBeUM7QUFDL0NYLE9BQUdRLEdBQUgsR0FBU0ssS0FBS0wsR0FBTCxDQUFTUixHQUFHUSxHQUFaLEVBQWlCTCxTQUFTUyxZQUExQixDQUFUO0FBQ0E7O0FBRUQsT0FBSVQsU0FBU08sR0FBVCxLQUFpQkMsU0FBckIsRUFBZ0M7QUFDL0JYLE9BQUdVLEdBQUgsR0FBU1AsU0FBU08sR0FBbEI7QUFDQSxJQUZELE1BRU8sSUFBSVAsU0FBU1csWUFBVCxLQUEwQkgsU0FBOUIsRUFBeUM7QUFDL0NYLE9BQUdVLEdBQUgsR0FBU0csS0FBS0gsR0FBTCxDQUFTVixHQUFHVSxHQUFaLEVBQWlCUCxTQUFTVyxZQUExQixDQUFUO0FBQ0E7O0FBRUQsT0FBSWQsR0FBR1EsR0FBSCxLQUFXUixHQUFHVSxHQUFsQixFQUF1QjtBQUN0QlYsT0FBR1UsR0FBSDs7QUFFQSxRQUFJLENBQUNQLFNBQVNFLFdBQWQsRUFBMkI7QUFDMUJMLFFBQUdRLEdBQUg7QUFDQTtBQUNEO0FBQ0QsR0F6Q3lDO0FBMEMxQ08sZ0JBQWNwQixJQTFDNEI7QUEyQzFDcUIsNEJBQTBCckIsSUEzQ2dCOztBQTZDMUNzQixjQUFZLHNCQUFXO0FBQ3RCLE9BQUlqQixLQUFLLElBQVQ7QUFDQSxPQUFJQyxPQUFPRCxHQUFHRSxPQUFkO0FBQ0EsT0FBSUMsV0FBV0YsS0FBS0csS0FBcEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFJYyxXQUFXbEIsR0FBR2UsWUFBSCxFQUFmO0FBQ0FHLGNBQVdMLEtBQUtILEdBQUwsQ0FBUyxDQUFULEVBQVlRLFFBQVosQ0FBWDs7QUFFQSxPQUFJQywwQkFBMEI7QUFDN0JELGNBQVVBLFFBRG1CO0FBRTdCVixTQUFLTCxTQUFTSyxHQUZlO0FBRzdCRSxTQUFLUCxTQUFTTyxHQUhlO0FBSTdCVSxjQUFVMUIsUUFBUTJCLGlCQUFSLENBQTBCbEIsU0FBU21CLGFBQW5DLEVBQWtEbkIsU0FBU2lCLFFBQTNEO0FBSm1CLElBQTlCO0FBTUEsT0FBSWhCLFFBQVFKLEdBQUdJLEtBQUgsR0FBV1gsTUFBTThCLEtBQU4sQ0FBWUMsVUFBWixDQUF1QkMsTUFBdkIsQ0FBOEJOLHVCQUE5QixFQUF1RG5CLEVBQXZELENBQXZCOztBQUVBQSxNQUFHZ0Isd0JBQUg7O0FBRUE7QUFDQTtBQUNBaEIsTUFBR1UsR0FBSCxHQUFTaEIsUUFBUWdCLEdBQVIsQ0FBWU4sS0FBWixDQUFUO0FBQ0FKLE1BQUdRLEdBQUgsR0FBU2QsUUFBUWMsR0FBUixDQUFZSixLQUFaLENBQVQ7O0FBRUEsT0FBSUQsU0FBU3VCLE9BQWIsRUFBc0I7QUFDckJ0QixVQUFNc0IsT0FBTjs7QUFFQTFCLE9BQUcyQixLQUFILEdBQVczQixHQUFHVSxHQUFkO0FBQ0FWLE9BQUc0QixHQUFILEdBQVM1QixHQUFHUSxHQUFaO0FBQ0EsSUFMRCxNQUtPO0FBQ05SLE9BQUcyQixLQUFILEdBQVczQixHQUFHUSxHQUFkO0FBQ0FSLE9BQUc0QixHQUFILEdBQVM1QixHQUFHVSxHQUFaO0FBQ0E7QUFDRCxHQWpGeUM7QUFrRjFDbUIsd0JBQXNCLGdDQUFXO0FBQ2hDLE9BQUk3QixLQUFLLElBQVQ7QUFDQUEsTUFBRzhCLGNBQUgsR0FBb0I5QixHQUFHSSxLQUFILENBQVMyQixLQUFULEVBQXBCO0FBQ0EvQixNQUFHZ0MsYUFBSCxHQUFtQmhDLEdBQUdJLEtBQUgsQ0FBUzZCLE9BQVQsQ0FBaUIsQ0FBakIsQ0FBbkI7O0FBRUF4QyxTQUFNSSxLQUFOLENBQVlxQyxTQUFaLENBQXNCTCxvQkFBdEIsQ0FBMkNNLElBQTNDLENBQWdEbkMsRUFBaEQ7QUFDQTtBQXhGeUMsRUFBbkIsQ0FBeEI7QUEwRkEsQ0EvRkQiLCJmaWxlIjoic2NhbGUubGluZWFyYmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQ2hhcnQpIHtcclxuXHJcblx0dmFyIGhlbHBlcnMgPSBDaGFydC5oZWxwZXJzLFxyXG5cdFx0bm9vcCA9IGhlbHBlcnMubm9vcDtcclxuXHJcblx0Q2hhcnQuTGluZWFyU2NhbGVCYXNlID0gQ2hhcnQuU2NhbGUuZXh0ZW5kKHtcclxuXHRcdGhhbmRsZVRpY2tSYW5nZU9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbWUgPSB0aGlzO1xyXG5cdFx0XHR2YXIgb3B0cyA9IG1lLm9wdGlvbnM7XHJcblx0XHRcdHZhciB0aWNrT3B0cyA9IG9wdHMudGlja3M7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgZm9yY2luZyBpdCB0byBiZWdpbiBhdCAwLCBidXQgMCB3aWxsIGFscmVhZHkgYmUgcmVuZGVyZWQgb24gdGhlIGNoYXJ0LFxyXG5cdFx0XHQvLyBkbyBub3RoaW5nIHNpbmNlIHRoYXQgd291bGQgbWFrZSB0aGUgY2hhcnQgd2VpcmQuIElmIHRoZSB1c2VyIHJlYWxseSB3YW50cyBhIHdlaXJkIGNoYXJ0XHJcblx0XHRcdC8vIGF4aXMsIHRoZXkgY2FuIG1hbnVhbGx5IG92ZXJyaWRlIGl0XHJcblx0XHRcdGlmICh0aWNrT3B0cy5iZWdpbkF0WmVybykge1xyXG5cdFx0XHRcdHZhciBtaW5TaWduID0gaGVscGVycy5zaWduKG1lLm1pbik7XHJcblx0XHRcdFx0dmFyIG1heFNpZ24gPSBoZWxwZXJzLnNpZ24obWUubWF4KTtcclxuXHJcblx0XHRcdFx0aWYgKG1pblNpZ24gPCAwICYmIG1heFNpZ24gPCAwKSB7XHJcblx0XHRcdFx0XHQvLyBtb3ZlIHRoZSB0b3AgdXAgdG8gMFxyXG5cdFx0XHRcdFx0bWUubWF4ID0gMDtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKG1pblNpZ24gPiAwICYmIG1heFNpZ24gPiAwKSB7XHJcblx0XHRcdFx0XHQvLyBtb3ZlIHRoZSBib3R0b20gZG93biB0byAwXHJcblx0XHRcdFx0XHRtZS5taW4gPSAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRpY2tPcHRzLm1pbiAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0bWUubWluID0gdGlja09wdHMubWluO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHRpY2tPcHRzLnN1Z2dlc3RlZE1pbiAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0bWUubWluID0gTWF0aC5taW4obWUubWluLCB0aWNrT3B0cy5zdWdnZXN0ZWRNaW4pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAodGlja09wdHMubWF4ICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRtZS5tYXggPSB0aWNrT3B0cy5tYXg7XHJcblx0XHRcdH0gZWxzZSBpZiAodGlja09wdHMuc3VnZ2VzdGVkTWF4ICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRtZS5tYXggPSBNYXRoLm1heChtZS5tYXgsIHRpY2tPcHRzLnN1Z2dlc3RlZE1heCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChtZS5taW4gPT09IG1lLm1heCkge1xyXG5cdFx0XHRcdG1lLm1heCsrO1xyXG5cclxuXHRcdFx0XHRpZiAoIXRpY2tPcHRzLmJlZ2luQXRaZXJvKSB7XHJcblx0XHRcdFx0XHRtZS5taW4tLTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRnZXRUaWNrTGltaXQ6IG5vb3AsXHJcblx0XHRoYW5kbGVEaXJlY3Rpb25hbENoYW5nZXM6IG5vb3AsXHJcblxyXG5cdFx0YnVpbGRUaWNrczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBtZSA9IHRoaXM7XHJcblx0XHRcdHZhciBvcHRzID0gbWUub3B0aW9ucztcclxuXHRcdFx0dmFyIHRpY2tPcHRzID0gb3B0cy50aWNrcztcclxuXHJcblx0XHRcdC8vIEZpZ3VyZSBvdXQgd2hhdCB0aGUgbWF4IG51bWJlciBvZiB0aWNrcyB3ZSBjYW4gc3VwcG9ydCBpdCBpcyBiYXNlZCBvbiB0aGUgc2l6ZSBvZlxyXG5cdFx0XHQvLyB0aGUgYXhpcyBhcmVhLiBGb3Igbm93LCB3ZSBzYXkgdGhhdCB0aGUgbWluaW11bSB0aWNrIHNwYWNpbmcgaW4gcGl4ZWxzIG11c3QgYmUgNTBcclxuXHRcdFx0Ly8gV2UgYWxzbyBsaW1pdCB0aGUgbWF4aW11bSBudW1iZXIgb2YgdGlja3MgdG8gMTEgd2hpY2ggZ2l2ZXMgYSBuaWNlIDEwIHNxdWFyZXMgb25cclxuXHRcdFx0Ly8gdGhlIGdyYXBoLiBNYWtlIHN1cmUgd2UgYWx3YXlzIGhhdmUgYXQgbGVhc3QgMiB0aWNrc1xyXG5cdFx0XHR2YXIgbWF4VGlja3MgPSBtZS5nZXRUaWNrTGltaXQoKTtcclxuXHRcdFx0bWF4VGlja3MgPSBNYXRoLm1heCgyLCBtYXhUaWNrcyk7XHJcblxyXG5cdFx0XHR2YXIgbnVtZXJpY0dlbmVyYXRvck9wdGlvbnMgPSB7XHJcblx0XHRcdFx0bWF4VGlja3M6IG1heFRpY2tzLFxyXG5cdFx0XHRcdG1pbjogdGlja09wdHMubWluLFxyXG5cdFx0XHRcdG1heDogdGlja09wdHMubWF4LFxyXG5cdFx0XHRcdHN0ZXBTaXplOiBoZWxwZXJzLmdldFZhbHVlT3JEZWZhdWx0KHRpY2tPcHRzLmZpeGVkU3RlcFNpemUsIHRpY2tPcHRzLnN0ZXBTaXplKVxyXG5cdFx0XHR9O1xyXG5cdFx0XHR2YXIgdGlja3MgPSBtZS50aWNrcyA9IENoYXJ0LlRpY2tzLmdlbmVyYXRvcnMubGluZWFyKG51bWVyaWNHZW5lcmF0b3JPcHRpb25zLCBtZSk7XHJcblxyXG5cdFx0XHRtZS5oYW5kbGVEaXJlY3Rpb25hbENoYW5nZXMoKTtcclxuXHJcblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIHdlIG5lZWQgdG8gdXBkYXRlIG91ciBtYXggYW5kIG1pbiBnaXZlbiB0aGUgdGljayB2YWx1ZXMgc2luY2Ugd2UgaGF2ZSBleHBhbmRlZCB0aGVcclxuXHRcdFx0Ly8gcmFuZ2Ugb2YgdGhlIHNjYWxlXHJcblx0XHRcdG1lLm1heCA9IGhlbHBlcnMubWF4KHRpY2tzKTtcclxuXHRcdFx0bWUubWluID0gaGVscGVycy5taW4odGlja3MpO1xyXG5cclxuXHRcdFx0aWYgKHRpY2tPcHRzLnJldmVyc2UpIHtcclxuXHRcdFx0XHR0aWNrcy5yZXZlcnNlKCk7XHJcblxyXG5cdFx0XHRcdG1lLnN0YXJ0ID0gbWUubWF4O1xyXG5cdFx0XHRcdG1lLmVuZCA9IG1lLm1pbjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRtZS5zdGFydCA9IG1lLm1pbjtcclxuXHRcdFx0XHRtZS5lbmQgPSBtZS5tYXg7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRjb252ZXJ0VGlja3NUb0xhYmVsczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBtZSA9IHRoaXM7XHJcblx0XHRcdG1lLnRpY2tzQXNOdW1iZXJzID0gbWUudGlja3Muc2xpY2UoKTtcclxuXHRcdFx0bWUuemVyb0xpbmVJbmRleCA9IG1lLnRpY2tzLmluZGV4T2YoMCk7XHJcblxyXG5cdFx0XHRDaGFydC5TY2FsZS5wcm90b3R5cGUuY29udmVydFRpY2tzVG9MYWJlbHMuY2FsbChtZSk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcbiJdfQ==