'use strict';

module.exports = function (Chart) {

	var helpers = Chart.helpers,
	    globalOpts = Chart.defaults.global;

	globalOpts.elements.arc = {
		backgroundColor: globalOpts.defaultColor,
		borderColor: '#ffffff',
		borderWidth: 2
	};

	Chart.elements.Arc = Chart.Element.extend({
		inLabelRange: function inLabelRange(mouseX) {
			var vm = this._view;

			if (vm) {
				return Math.pow(mouseX - vm.x, 2) < Math.pow(vm.radius + vm.hoverRadius, 2);
			}
			return false;
		},
		inRange: function inRange(chartX, chartY) {
			var vm = this._view;

			if (vm) {
				var pointRelativePosition = helpers.getAngleFromPoint(vm, {
					x: chartX,
					y: chartY
				}),
				    angle = pointRelativePosition.angle,
				    distance = pointRelativePosition.distance;

				// Sanitise angle range
				var startAngle = vm.startAngle;
				var endAngle = vm.endAngle;
				while (endAngle < startAngle) {
					endAngle += 2.0 * Math.PI;
				}
				while (angle > endAngle) {
					angle -= 2.0 * Math.PI;
				}
				while (angle < startAngle) {
					angle += 2.0 * Math.PI;
				}

				// Check if within the range of the open/close angle
				var betweenAngles = angle >= startAngle && angle <= endAngle,
				    withinRadius = distance >= vm.innerRadius && distance <= vm.outerRadius;

				return betweenAngles && withinRadius;
			}
			return false;
		},
		getCenterPoint: function getCenterPoint() {
			var vm = this._view;
			var halfAngle = (vm.startAngle + vm.endAngle) / 2;
			var halfRadius = (vm.innerRadius + vm.outerRadius) / 2;
			return {
				x: vm.x + Math.cos(halfAngle) * halfRadius,
				y: vm.y + Math.sin(halfAngle) * halfRadius
			};
		},
		getArea: function getArea() {
			var vm = this._view;
			return Math.PI * ((vm.endAngle - vm.startAngle) / (2 * Math.PI)) * (Math.pow(vm.outerRadius, 2) - Math.pow(vm.innerRadius, 2));
		},
		tooltipPosition: function tooltipPosition() {
			var vm = this._view;

			var centreAngle = vm.startAngle + (vm.endAngle - vm.startAngle) / 2,
			    rangeFromCentre = (vm.outerRadius - vm.innerRadius) / 2 + vm.innerRadius;
			return {
				x: vm.x + Math.cos(centreAngle) * rangeFromCentre,
				y: vm.y + Math.sin(centreAngle) * rangeFromCentre
			};
		},
		draw: function draw() {

			var ctx = this._chart.ctx,
			    vm = this._view,
			    sA = vm.startAngle,
			    eA = vm.endAngle;

			ctx.beginPath();

			ctx.arc(vm.x, vm.y, vm.outerRadius, sA, eA);
			ctx.arc(vm.x, vm.y, vm.innerRadius, eA, sA, true);

			ctx.closePath();
			ctx.setStrokeStyle(vm.borderColor);
			ctx.setLineWidth(vm.borderWidth);

			ctx.setFillStyle(vm.backgroundColor);

			ctx.fill();
			ctx.setLineJoin('bevel');

			if (vm.borderWidth) {
				ctx.stroke();
			}
		}
	});
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVsZW1lbnQuYXJjLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJDaGFydCIsImhlbHBlcnMiLCJnbG9iYWxPcHRzIiwiZGVmYXVsdHMiLCJnbG9iYWwiLCJlbGVtZW50cyIsImFyYyIsImJhY2tncm91bmRDb2xvciIsImRlZmF1bHRDb2xvciIsImJvcmRlckNvbG9yIiwiYm9yZGVyV2lkdGgiLCJBcmMiLCJFbGVtZW50IiwiZXh0ZW5kIiwiaW5MYWJlbFJhbmdlIiwibW91c2VYIiwidm0iLCJfdmlldyIsIk1hdGgiLCJwb3ciLCJ4IiwicmFkaXVzIiwiaG92ZXJSYWRpdXMiLCJpblJhbmdlIiwiY2hhcnRYIiwiY2hhcnRZIiwicG9pbnRSZWxhdGl2ZVBvc2l0aW9uIiwiZ2V0QW5nbGVGcm9tUG9pbnQiLCJ5IiwiYW5nbGUiLCJkaXN0YW5jZSIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsIlBJIiwiYmV0d2VlbkFuZ2xlcyIsIndpdGhpblJhZGl1cyIsImlubmVyUmFkaXVzIiwib3V0ZXJSYWRpdXMiLCJnZXRDZW50ZXJQb2ludCIsImhhbGZBbmdsZSIsImhhbGZSYWRpdXMiLCJjb3MiLCJzaW4iLCJnZXRBcmVhIiwidG9vbHRpcFBvc2l0aW9uIiwiY2VudHJlQW5nbGUiLCJyYW5nZUZyb21DZW50cmUiLCJkcmF3IiwiY3R4IiwiX2NoYXJ0Iiwic0EiLCJlQSIsImJlZ2luUGF0aCIsImNsb3NlUGF0aCIsInNldFN0cm9rZVN0eWxlIiwic2V0TGluZVdpZHRoIiwic2V0RmlsbFN0eWxlIiwiZmlsbCIsInNldExpbmVKb2luIiwic3Ryb2tlIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBT0MsT0FBUCxHQUFpQixVQUFTQyxLQUFULEVBQWdCOztBQUVoQyxLQUFJQyxVQUFVRCxNQUFNQyxPQUFwQjtBQUFBLEtBQ0NDLGFBQWFGLE1BQU1HLFFBQU4sQ0FBZUMsTUFEN0I7O0FBR0FGLFlBQVdHLFFBQVgsQ0FBb0JDLEdBQXBCLEdBQTBCO0FB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ZmlsZSI6ImVsZW1lbnQuYXJjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihDaGFydCkge1xyXG5cclxuXHR2YXIgaGVscGVycyA9IENoYXJ0LmhlbHBlcnMsXHJcblx0XHRnbG9iYWxPcHRzID0gQ2hhcnQuZGVmYXVsdHMuZ2xvYmFsO1xyXG5cclxuXHRnbG9iYWxPcHRzLmVsZW1lbnRzLmFyYyA9IHtcclxuXHRcdGJhY2tncm91bmRDb2xvcjogZ2xvYmFsT3B0cy5kZWZhdWx0Q29sb3IsXHJcblx0XHRib3JkZXJDb2xvcjogJyNmZmZmZmYnLFxyXG5cdFx0Ym9yZGVyV2lkdGg6IDJcclxuXHR9O1xyXG5cclxuXHRDaGFydC5lbGVtZW50cy5BcmMgPSBDaGFydC5FbGVtZW50LmV4dGVuZCh7XHJcblx0XHRpbkxhYmVsUmFuZ2U6IGZ1bmN0aW9uKG1vdXNlWCkge1xyXG5cdFx0XHR2YXIgdm0gPSB0aGlzLl92aWV3O1xyXG5cclxuXHRcdFx0aWYgKHZtKSB7XHJcblx0XHRcdFx0cmV0dXJuIChNYXRoLnBvdyhtb3VzZVggLSB2bS54LCAyKSA8IE1hdGgucG93KHZtLnJhZGl1cyArIHZtLmhvdmVyUmFkaXVzLCAyKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHRcdGluUmFuZ2U6IGZ1bmN0aW9uKGNoYXJ0WCwgY2hhcnRZKSB7XHJcblx0XHRcdHZhciB2bSA9IHRoaXMuX3ZpZXc7XHJcblxyXG5cdFx0XHRpZiAodm0pIHtcclxuXHRcdFx0XHR2YXIgcG9pbnRSZWxhdGl2ZVBvc2l0aW9uID0gaGVscGVycy5nZXRBbmdsZUZyb21Qb2ludCh2bSwge1xyXG5cdFx0XHRcdFx0XHR4OiBjaGFydFgsXHJcblx0XHRcdFx0XHRcdHk6IGNoYXJ0WVxyXG5cdFx0XHRcdFx0fSksXHJcblx0XHRcdFx0XHRhbmdsZSA9IHBvaW50UmVsYXRpdmVQb3NpdGlvbi5hbmdsZSxcclxuXHRcdFx0XHRcdGRpc3RhbmNlID0gcG9pbnRSZWxhdGl2ZVBvc2l0aW9uLmRpc3RhbmNlO1xyXG5cclxuXHRcdFx0XHQvLyBTYW5pdGlzZSBhbmdsZSByYW5nZVxyXG5cdFx0XHRcdHZhciBzdGFydEFuZ2xlID0gdm0uc3RhcnRBbmdsZTtcclxuXHRcdFx0XHR2YXIgZW5kQW5nbGUgPSB2bS5lbmRBbmdsZTtcclxuXHRcdFx0XHR3aGlsZSAoZW5kQW5nbGUgPCBzdGFydEFuZ2xlKSB7XHJcblx0XHRcdFx0XHRlbmRBbmdsZSArPSAyLjAgKiBNYXRoLlBJO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR3aGlsZSAoYW5nbGUgPiBlbmRBbmdsZSkge1xyXG5cdFx0XHRcdFx0YW5nbGUgLT0gMi4wICogTWF0aC5QSTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0d2hpbGUgKGFuZ2xlIDwgc3RhcnRBbmdsZSkge1xyXG5cdFx0XHRcdFx0YW5nbGUgKz0gMi4wICogTWF0aC5QSTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIHdpdGhpbiB0aGUgcmFuZ2Ugb2YgdGhlIG9wZW4vY2xvc2UgYW5nbGVcclxuXHRcdFx0XHR2YXIgYmV0d2VlbkFuZ2xlcyA9IChhbmdsZSA+PSBzdGFydEFuZ2xlICYmIGFuZ2xlIDw9IGVuZEFuZ2xlKSxcclxuXHRcdFx0XHRcdHdpdGhpblJhZGl1cyA9IChkaXN0YW5jZSA+PSB2bS5pbm5lclJhZGl1cyAmJiBkaXN0YW5jZSA8PSB2bS5vdXRlclJhZGl1cyk7XHJcblxyXG5cdFx0XHRcdHJldHVybiAoYmV0d2VlbkFuZ2xlcyAmJiB3aXRoaW5SYWRpdXMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0sXHJcblx0XHRnZXRDZW50ZXJQb2ludDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB2bSA9IHRoaXMuX3ZpZXc7XHJcblx0XHRcdHZhciBoYWxmQW5nbGUgPSAodm0uc3RhcnRBbmdsZSArIHZtLmVuZEFuZ2xlKSAvIDI7XHJcblx0XHRcdHZhciBoYWxmUmFkaXVzID0gKHZtLmlubmVyUmFkaXVzICsgdm0ub3V0ZXJSYWRpdXMpIC8gMjtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHR4OiB2bS54ICsgTWF0aC5jb3MoaGFsZkFuZ2xlKSAqIGhhbGZSYWRpdXMsXHJcblx0XHRcdFx0eTogdm0ueSArIE1hdGguc2luKGhhbGZBbmdsZSkgKiBoYWxmUmFkaXVzXHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cdFx0Z2V0QXJlYTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB2bSA9IHRoaXMuX3ZpZXc7XHJcblx0XHRcdHJldHVybiBNYXRoLlBJICogKCh2bS5lbmRBbmdsZSAtIHZtLnN0YXJ0QW5nbGUpIC8gKDIgKiBNYXRoLlBJKSkgKiAoTWF0aC5wb3codm0ub3V0ZXJSYWRpdXMsIDIpIC0gTWF0aC5wb3codm0uaW5uZXJSYWRpdXMsIDIpKTtcclxuXHRcdH0sXHJcblx0XHR0b29sdGlwUG9zaXRpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdm0gPSB0aGlzLl92aWV3O1xyXG5cclxuXHRcdFx0dmFyIGNlbnRyZUFuZ2xlID0gdm0uc3RhcnRBbmdsZSArICgodm0uZW5kQW5nbGUgLSB2bS5zdGFydEFuZ2xlKSAvIDIpLFxyXG5cdFx0XHRcdHJhbmdlRnJvbUNlbnRyZSA9ICh2bS5vdXRlclJhZGl1cyAtIHZtLmlubmVyUmFkaXVzKSAvIDIgKyB2bS5pbm5lclJhZGl1cztcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHR4OiB2bS54ICsgKE1hdGguY29zKGNlbnRyZUFuZ2xlKSAqIHJhbmdlRnJvbUNlbnRyZSksXHJcblx0XHRcdFx0eTogdm0ueSArIChNYXRoLnNpbihjZW50cmVBbmdsZSkgKiByYW5nZUZyb21DZW50cmUpXHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cdFx0ZHJhdzogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR2YXIgY3R4ID0gdGhpcy5fY2hhcnQuY3R4LFxyXG5cdFx0XHRcdHZtID0gdGhpcy5fdmlldyxcclxuXHRcdFx0XHRzQSA9IHZtLnN0YXJ0QW5nbGUsXHJcblx0XHRcdFx0ZUEgPSB2bS5lbmRBbmdsZTtcclxuXHJcblx0XHRcdGN0eC5iZWdpblBhdGgoKTtcclxuXHJcblx0XHRcdGN0eC5hcmModm0ueCwgdm0ueSwgdm0ub3V0ZXJSYWRpdXMsIHNBLCBlQSk7XHJcblx0XHRcdGN0eC5hcmModm0ueCwgdm0ueSwgdm0uaW5uZXJSYWRpdXMsIGVBLCBzQSwgdHJ1ZSk7XHJcblxyXG5cdFx0XHRjdHguY2xvc2VQYXRoKCk7XHJcblx0XHRcdGN0eC5zZXRTdHJva2VTdHlsZSh2bS5ib3JkZXJDb2xvcik7XHJcblx0XHRcdGN0eC5zZXRMaW5lV2lkdGgodm0uYm9yZGVyV2lkdGgpO1xyXG5cclxuXHRcdFx0Y3R4LnNldEZpbGxTdHlsZSh2bS5iYWNrZ3JvdW5kQ29sb3IpO1xyXG5cclxuXHRcdFx0Y3R4LmZpbGwoKTtcclxuXHRcdFx0Y3R4LnNldExpbmVKb2luKCdiZXZlbCcpO1xyXG5cclxuXHRcdFx0aWYgKHZtLmJvcmRlcldpZHRoKSB7XHJcblx0XHRcdFx0Y3R4LnN0cm9rZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcbiJdfQ==